.\" Text automatically generated by md2man 
.TH tmww-ip 1 "November 28, 2014" "Linux" "Linux Reference Manual"
.SH NAME
\fBip \fP- login server log IPs filter
.PP
.SH USAGE
.nf
.fam C
    subcommand: domains -- form collision domains
        [ -w FILE ] -- write cache to default path (SERVERSTAFF)
        [ -r FILE ] -- use cache (e.g. formed with "tmww server ip -m2 -w FILE"
            skips date interval settings
        No -w or -r option causes output to stdout
        [ -u ] -- lookup all chars from matched domain IDs
        [ -n ] -- lookup all non-aliased chars from matched domain IDs
    subcommand: matches -- filter matching logins
        [ -g ] -- print date - time - id - ip - geoiplookup
        [ -i ] -- print date - time - id - ip
        [ -s ] -- geoiplookup stats
        No filter options will output lines unchanged.
    Common options:
    - time interval options:
        [ -m N ] -- last N monthes
        [ -d N ] -- last N days
        [ -f YYYY-MM-DD ] -- from date
        [ -t YYYY-MM-DD ] -- to date (optional)
    - char matching options:
        [ -p PLAYER ] -- target player
        [ -c CHAR ] -- target char
        [ -a ID ] -- target by account ID
.fam T
.fi
.PP
.SH FORMAT
.SS Example login.log event
2014-11-11 15:55:44.333: Authentification accepted (account: somelogin (id: 2233445), ip: 222.111.222.111)
.SS Collision domain format
.nf
.fam C
    {"nids":[],"ids":[],"players":[],"ips":[]}
.fam T
.fi
.PP
Files are JSON lines. Each line - one collision domain. Line is mapping with 4 keys:
.TP
.B
nids
account IDs not associated with player names
.TP
.B
ids
account IDs for known players
.TP
.B
players
known players
.TP
.B
ips
IPs where intersecting IDs seen
.PP
All values are strings.
.PP
.SH CONFIG
SERVERLOGINLOG : string : $SERVERPATH/login/login.log
login server log location
SERVERSTAFF : string : $TMP/ip
path to store preprocessed domains
.PP
.SH EXAMPLE
.nf
.fam C
    # cache whole login server log for all currently known player entries
    $ tmww ip domains -f 2013-01-01 -t 2014-01-01 -w 2013
.fam T
.fi
.PP
.nf
.fam C
    # output collision domain
    $ tmww ip domains -r 2013 -p frost
.fam T
.fi
.PP
.nf
.fam C
    # output non-associated chars with their ids
    $ tmww ip domains -r 2013 -p frost -n
.fam T
.fi
.PP
.nf
.fam C
    # output chars with their ids in matching domain
    $ tmww ip domains -r 2013 -a 2233445 -u
.fam T
.fi
.PP
.nf
.fam C
    # output geoiplookup stats
    $ tmww ip matches -f 2013-01-01 -t 2013-12-01 -s
.fam T
.fi
.PP
.SH BUGS
Default date conversion utilite is GNU date, so e.g. with date without day it
will fail conversion.
.PP
.SH COPYRIGHT
This document is part of tmww - The Mana World Watcher scripts.
.PP
Licensed under terms of GNU General Public License version 3. For full text of
license see COPYING file distributed with tmww.
.PP
.SH AUTHORS
willee <v4r@trioptimum.com>, 2012-2014
.PP
.SH SEE ALSO
\fBtmww\fP(1), \fBtmww-config\fP(5), \fBtmww-server\fP(1), \fBjq\fP(1)
